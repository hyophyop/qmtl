# Full-stack development configuration (Gateway/DAG Manager/WorldService/Seamless).
# Use with the full docker-compose bundle and override secrets as needed.
profile: dev

worldservice:
  url: http://localhost:8080
  timeout: 0.3
  retries: 2
  enable_proxy: true
  enforce_live_guard: true
  dsn: sqlite:///./worlds.db
  redis: redis://localhost:6379/0
  bind:
    host: 0.0.0.0
    port: 8080

gateway:
  host: 0.0.0.0
  port: 8080
  redis_dsn: redis://localhost:6379/1
  database_backend: sqlite
  database_dsn: sqlite:///./gateway.db
  controlbus_brokers:
    - localhost:9092
  controlbus_topics:
    - activation
    - policy
    - queue
  commitlog_topic: dev.gateway.ingest
  commitlog_group: dev-gateway-commit
  commitlog_transactional_id: dev-gateway-writer
  events:
    secret: dev-secret
    ttl: 300
    stream_url: ws://localhost:8080/ws/evt
    fallback_url: ws://localhost:8080/ws
  websocket:
    rate_limit_per_sec: 50

dagmanager:
  neo4j_dsn: neo4j://localhost:7687
  neo4j_user: neo4j
  neo4j_password: dev-password
  kafka_dsn: localhost:9092
  grpc_host: 127.0.0.1
  grpc_port: 50051
  http_host: 127.0.0.1
  http_port: 8101
  controlbus_dsn: localhost:9092
  controlbus_queue_topic: queue
  enable_topic_namespace: false

seamless:
  coordinator_url: http://localhost:5010
  redis_dsn: redis://localhost:6379/3
  questdb_dsn: postgresql://qmtl:qmtl@localhost:8812/qmtl
  artifact_endpoint: http://localhost:9000
  artifact_bucket: qmtl-seamless
  artifacts_enabled: true
  artifact_dir: ./var/seamless-artifacts
  fingerprint_mode: canonical
  publish_fingerprint: true
  preview_fingerprint: false
  early_fingerprint: false
  sla_preset: baseline
  conformance_preset: strict-blocking
  presets_file: ../seamless/presets.yaml

connectors:
  ccxt_rate_limiter_redis: redis://localhost:6379/0
  worker_id: dev-worker

telemetry:
  enable_fastapi_otel: false

cache:
  arrow_cache_enabled: false
  cache_evict_interval: 60
  feature_artifacts_enabled: false

test:
  test_mode: true
  fail_on_history_gap: false
