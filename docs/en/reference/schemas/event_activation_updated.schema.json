{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://qmtl.dev/schemas/event_activation_updated.schema.json",
  "title": "CloudEvent[ActivationUpdatedData]",
  "type": "object",
  "$defs": {
    "ActivationUpdatedData": {
      "type": "object",
      "title": "ActivationUpdatedData",
      "properties": {
        "version": { "type": "integer" },
        "world_id": { "type": "string" },
        "strategy_id": { "anyOf": [{ "type": "string" }, { "type": "null" }], "default": null },
        "side": {
          "anyOf": [
            { "type": "string", "enum": ["long", "short"] },
            { "type": "null" }
          ],
          "default": null
        },
        "active": { "anyOf": [{ "type": "boolean" }, { "type": "null" }], "default": null },
        "weight": { "anyOf": [{ "type": "number" }, { "type": "null" }], "default": null },
        "freeze": { "anyOf": [{ "type": "boolean" }, { "type": "null" }], "default": null },
        "drain": { "anyOf": [{ "type": "boolean" }, { "type": "null" }], "default": null },
        "effective_mode": {
          "anyOf": [
            { "type": "string", "enum": ["validate", "compute-only", "paper", "live", "shadow"] },
            { "type": "null" }
          ],
          "default": null
        },
        "execution_domain": {
          "anyOf": [
            { "type": "string", "enum": ["backtest", "dryrun", "live", "shadow"] },
            { "type": "null" }
          ],
          "default": null
        },
        "compute_context": {
          "anyOf": [
            { "type": "object", "additionalProperties": true },
            { "type": "null" }
          ],
          "default": null
        },
        "etag": { "anyOf": [{ "type": "string" }, { "type": "null" }], "default": null },
        "run_id": { "anyOf": [{ "type": "string" }, { "type": "null" }], "default": null },
        "ts": { "anyOf": [{ "type": "string" }, { "type": "null" }], "default": null },
        "state_hash": { "anyOf": [{ "type": "string" }, { "type": "null" }], "default": null },
        "phase": { "anyOf": [{ "type": "string" }, { "type": "null" }], "default": null },
        "requires_ack": { "anyOf": [{ "type": "boolean" }, { "type": "null" }], "default": null },
        "sequence": { "anyOf": [{ "type": "integer" }, { "type": "null" }], "default": null }
      },
      "required": ["version", "world_id"]
    }
  },
  "properties": {
    "specversion": { "type": "string", "const": "1.0", "default": "1.0" },
    "id": { "type": "string" },
    "source": { "type": "string" },
    "type": { "type": "string", "const": "activation_updated" },
    "time": { "type": "string", "format": "date-time" },
    "datacontenttype": { "type": "string", "const": "application/json", "default": "application/json" },
    "data": { "$ref": "#/$defs/ActivationUpdatedData" },
    "correlation_id": { "anyOf": [{ "type": "string" }, { "type": "null" }], "default": null },
    "seq_no": { "anyOf": [{ "type": "integer" }, { "type": "null" }], "default": null }
  },
  "required": ["id", "source", "type", "time", "data"]
}
