# Agent Instructions

This file is auto-generated by `scripts/build_agent_instructions.py`.

## AGENTS.md (scope: repository root)

# Development Guidelines

This repository hosts strategy experiments built on top of the [QMTL](qmtl/README.md) subtree. For comprehensive policies—such as the QMTL subtree workflow, testing commands, and the AlphaDocs process—see [CONTRIBUTING.md](CONTRIBUTING.md).

Key reminders:

- Always synchronize the `qmtl/` subtree before starting work and push upstream after making changes.
- Strategy-specific code lives under `strategies/`; keep reusable utilities only in `qmtl/`.
- When modifying the subtree itself, follow `qmtl/AGENTS.md`. For strategy conventions, refer to `strategies/AGENTS.md`.
- If any `AGENTS.md` files change, run `uv run python scripts/build_agent_instructions.py` to refresh `docs/agents-instructions.md` before committing. Once GitHub Actions returns, consider wiring this into pre-commit or CI.

## qmtl/AGENTS.md (scope: qmtl subtree)

# Development Guidelines

**Applies to files under `qmtl/`.**

For general contribution and testing policies, see the repository root [AGENTS.md](../AGENTS.md).

## Environment

- Manage the Python environment using **uv**. Install dependencies with
  `uv pip install -e .[dev]` and build distributable wheels via `uv pip wheel .`.

## Architecture

- Implementations must adhere to the specifications in `docs/architecture/architecture.md`,
  `docs/architecture/gateway.md` and `docs/architecture/dag-manager.md`.
- Do not place alpha or strategy modules in `qmtl/`; only reusable feature extraction or
  data-processing utilities belong here. All alpha logic should live in the root project's
  `strategies/` directory.

## Documentation Management

- Store documentation in the `docs/` directory with descriptive filenames.
- Each Markdown file should start with a single `#` heading and use relative links to other docs.
- Update `mkdocs.yml` navigation when adding or moving files.
- Validate docs with `uv run mkdocs build` before committing. Ensure `mkdocs-macros-plugin`
  and `mkdocs-breadcrumbs-plugin` are installed via `uv pip install -e .[dev]`.

## Example Projects

Example strategies under `qmtl/examples/` follow the same conventions as the rest of the
project:

- Run tests with `uv run -m pytest -W error`.
- Place node processors under `nodes/` and tests under `tests/`.
- Keep functions pure and free of side effects.

## Prioritizing external alpha ideas

- The top-level docs directory `docs/alphadocs/ideas/gpt5pro/` contains alpha ideas rewritten
  by a stronger model (GPT-5-Pro). These files should be treated as higher-priority
  implementation targets by agents and maintainers working within the `qmtl` project.
- When implementing from these documents inside `qmtl`, include
  `# Source: docs/alphadocs/ideas/gpt5pro/<doc>.md` and add `# Priority: gpt5pro` to the
  module header. Automated tooling should create an implementation branch/issue and record
  history in `docs/alphadocs_history.log`.

## strategies/AGENTS.md (scope: strategies directory)

# Strategy Guidelines

These guidelines apply to all files under the `strategies/` directory. General repository setup and testing rules are described in the root [AGENTS.md](../AGENTS.md).

## Setup

Follow the instructions in the root `AGENTS.md` to set up the environment and run tests. No strategy-specific setup is required.

## Development

- Implement node processors as pure functions under `nodes/` so they can be reused across DAGs.
- Define strategy DAGs in `dags/` using `qmtl.dag_manager` for orchestration.
- Connect nodes by wiring explicit output keys to input parameters; the graph must remain acyclic and each node name unique.
- Use `snake_case` for file and function names. Name node processor functions with the `_node` suffix and DAG modules with the `_dag.py` suffix.

## Testing

- Add tests for strategy behavior under `strategies/tests/`.
- Run the repository's test suite from the project root as documented in the root `AGENTS.md`.

